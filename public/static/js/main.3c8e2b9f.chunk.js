(this.webpackJsonplc_podcast=this.webpackJsonplc_podcast||[]).push([[0],{29:function(e,t,n){},54:function(e,t,n){e.exports=n(68)},59:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(27),r=n(0),l=n.n(r),i=n(24),o=n.n(i),c=(n(59),n(10)),s=n(11),u=n(13),d=n(12),m=n(6),p=n(36),h=n.n(p),g=n(44),v=n(15),x=function(){return localStorage.getItem("auth-token")},f=function(e){return localStorage.setItem("auth-token",e)},w=function(){return localStorage.getItem("role")},_=function(e){return localStorage.setItem("role",e)},S=function(e){return localStorage.setItem("user_name",e)},E=[{id:1,text:"\uff0c",type:"COMMA"},{id:2,text:"\u3002",type:"PERIOD"},{id:3,text:"\u201d",type:"QUOTE"},{id:4,text:"\uff01",type:"EXCLAMATION"},{id:5,text:"\uff1f",type:"QUESTION"},{id:6,text:"\uff1a",type:"COLON"},{id:7,text:"0",type:"ZERO"},{id:8,text:"1",type:"ONE"},{id:9,text:"2",type:"TWO"},{id:10,text:"3",type:"THREE"},{id:11,text:"4",type:"FOUR"},{id:12,text:"5",type:"FIVE"},{id:13,text:"6",type:"SIX"},{id:14,text:"7",type:"SEVEN"},{id:15,text:"8",type:"EIGHT"},{id:16,text:"9",type:"NINE"},{id:17,text:" ",type:"SPACE"},{id:18,text:"Smith",type:"NAME"}],y=[{times_used:0,color:"lightblue"},{times_used:1,color:"pink"},{times_used:2,color:"yellow"},{times_used:3,color:"lightgreen"},{times_used:4,color:"coral"},{times_used:5,color:"blueviolet"}],b=n(16),T=n.n(b),C=n(70);function $(){var e=Object(v.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    Login(email: $email, password: $password) {\n      _id\n      user_name\n      password\n      token\n      role\n    }\n  }\n"]);return $=function(){return e},e}function N(){var e=Object(v.a)(["\n  mutation SignupMutation($email: String!, $password: String!, $user_name: String!) {\n    CreateUser(email: $email, password: $password, user_name: $user_name) {\n      _id\n      user_name\n      password\n      token\n      role\n    }\n  }\n"]);return N=function(){return e},e}var O=T()(N()),I=T()($()),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isLogin:!0,email:"",password:"",user_name:""},e._confirm=function(){var t=Object(g.a)(h.a.mark((function t(n){var a,r,l,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n),a=n.Login,r=a.token,l=a.user_name,i=a.role,e._saveUserData(r,l,i),e.props.history.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._saveUserData=function(e,t,n){f(e),S(t),_(n)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.isLogin,a=t.email,r=t.password,i=t.user_name;return l.a.createElement("div",null,l.a.createElement("h4",null,n?"Login":"Sign Up"),l.a.createElement("div",{className:"flex flex-column"},!n&&l.a.createElement("input",{value:i,onChange:function(t){return e.setState({user_name:t.target.value})},type:"text",placeholder:"Your name"}),l.a.createElement("input",{value:a,onChange:function(t){return e.setState({email:t.target.value})},type:"text",placeholder:"Your email address"}),l.a.createElement("input",{value:r,onChange:function(t){return e.setState({password:t.target.value})},type:"password",placeholder:"Choose a safe password"})),l.a.createElement("div",null,l.a.createElement(C.a,{mutation:n?I:O,variables:{email:a,password:r,user_name:i},onCompleted:function(t){return e._confirm(t)}},(function(e){return l.a.createElement("button",{type:"button",onClick:e},n?"login":"create account")})),l.a.createElement("button",{type:"button",onClick:function(){return e.setState({isLogin:!e.state.isLogin})}},n?"need to create an account?":"already have an account?")))}}]),n}(r.Component),k=n(22),A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=!!x();return l.a.createElement("div",null,l.a.createElement("div",null,"Chinese App"),l.a.createElement(k.b,{to:"/"},"home"),l.a.createElement("div",null,t&&"ADMIN"===w()&&l.a.createElement("div",null,l.a.createElement("div",{className:"flex"},l.a.createElement(k.b,{to:"/author"},"author")),l.a.createElement("div",{className:"flex"},l.a.createElement(k.b,{to:"/editor"},"editor")),l.a.createElement("div",{className:"flex"},l.a.createElement(k.b,{to:"/words"},"words"))),t&&l.a.createElement("div",{className:"flex"},l.a.createElement(k.b,{to:"/play"},"play"))),l.a.createElement("div",{className:"flex flex-fixed"},t?l.a.createElement("div",{onClick:function(){localStorage.removeItem("auth-token"),e.props.history.push("/")}},"logout"):l.a.createElement(k.b,{to:"/login"},"login")))}}]),n}(r.Component),W=Object(m.f)(A),L=n(32),D=(n(29),n(67),function(e){var t=e.isOn,n=e.handleToggle;return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{checked:t,onChange:n,className:"react-switch-checkbox",id:"react-switch-new",type:"checkbox"}),l.a.createElement("label",{style:{background:t&&"#06D6A0"},className:"react-switch-label",htmlFor:"react-switch-new"},l.a.createElement("span",{className:"react-switch-button"})))}),M=n(40);function R(){var e=Object(v.a)(["\n  mutation replacesentence($rawSentenceTextSimplified: String!, $cleanSentenceTextSimplified: String!, $displaySentenceTextSimplified: String!,$rawSentenceTextTraditional: String!, $cleanSentenceTextTraditional: String!, $displaySentenceTextTraditional: String!, $pinyin: String!, $english: String!, $italics: String! $wordToTeachId: Int!, $sentenceContainedWordListSimplified: [String!], $currentInterval: Int!, $formerSentenceRawText: String!) {\n    DeleteSentence(raw_text: $formerSentenceRawText){\n      raw_text\n    }\n    CreateSentence(raw_text: $rawSentenceTextSimplified, clean_text: $cleanSentenceTextSimplified, display_text: $displaySentenceTextSimplified, alt_raw_text: $rawSentenceTextTraditional, alt_clean_text: $cleanSentenceTextTraditional, alt_display_text: $displaySentenceTextTraditional, pinyin: $pinyin, english: $english,, italics: $italics) {\n      raw_text\n    }\n    AddSentenceLevel(from: {raw_text:  $rawSentenceTextSimplified} to: {level_number: 1}){\n      from {raw_text}\n      to {level_number}\n    }\n    AddSentenceWord_taught(from: {raw_text: $rawSentenceTextSimplified} to: {word_id: $wordToTeachId}){\n      from {raw_text}\n      to {text}\n    }\n    AddSentenceInterval(from: {raw_text: $rawSentenceTextSimplified} to: {interval_order: $currentInterval}){\n      from {raw_text}\n      to {interval_order}\n    }\n    AddSentenceDependencies(src_sentence: $rawSentenceTextSimplified, dest_words: $sentenceContainedWordListSimplified){\n      raw_text\n      display_text\n    }\n  }\n\n"]);return R=function(){return e},e}function P(){var e=Object(v.a)(["\n  mutation addsentence($rawSentenceTextSimplified: String!, $cleanSentenceTextSimplified: String!, $displaySentenceTextSimplified: String!,$rawSentenceTextTraditional: String!, $cleanSentenceTextTraditional: String!, $displaySentenceTextTraditional: String!, $pinyin: String!, $english: String!, $italics: String!, $wordToTeachId: Int!, $sentenceContainedWordListSimplified: [String!], $currentInterval: Int!, $shouldCall: Boolean!) {\n    CreateSentence(raw_text: $rawSentenceTextSimplified, clean_text: $cleanSentenceTextSimplified, display_text: $displaySentenceTextSimplified, alt_raw_text: $rawSentenceTextTraditional, alt_clean_text: $cleanSentenceTextTraditional, alt_display_text: $displaySentenceTextTraditional, pinyin: $pinyin, english: $english, italics: $italics) {\n      raw_text\n    }\n    AddSentenceLevel(from: {raw_text:  $rawSentenceTextSimplified} to: {level_number: 1}){\n      from {raw_text}\n      to {level_number}\n    }\n    AddSentenceWord_taught(from: {raw_text: $rawSentenceTextSimplified} to: {word_id: $wordToTeachId}){\n      from {raw_text}\n      to {text}\n    }\n    AddSentenceInterval(from: {raw_text: $rawSentenceTextSimplified} to: {interval_order: $currentInterval}){\n      from {raw_text}\n      to {interval_order}\n    }\n    AddSentenceDependencies(src_sentence: $rawSentenceTextSimplified, dest_words: $sentenceContainedWordListSimplified){\n      raw_text\n      display_text\n    }\n    IncrementInterval(should_call: $shouldCall)\n  }\n\n"]);return P=function(){return e},e}function F(){var e=Object(v.a)(["\n  query GetLevelWords{\n  Author{\n    level{\n      level_number\n      points\n      minimum_usage\n      teachable_words{\n        text\n        alt_text\n        word_id\n        level{\n          points\n        }\n      }\n      addable_words{\n        text\n        alt_text\n        word_id\n        times_used\n        level{\n          points\n        }\n      }\n    }\n    interval{\n      sentences{\n        clean_text\n      }\n      interval_order\n      seconds\n      min_length\n      max_length\n    }\n  }\n}\n"]);return F=function(){return e},e}var q=T()(F()),U=T()(P()),B=T()(R()),z={option:function(e,t){var n=t.data;return Object(a.a)(Object(a.a)({},e),{},{color:"black",backgroundColor:n.color})}},H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).baseState={SentenceElements:[],formerSentenceRawText:null,formerSentenceCleanText:null,selectedWordId:null,wordToTeach:{text:"",word_id:null},containsWordToTeach:0,points:0,punctuationMode:!1,selectedPunctuationId:null,pinyin:"",english:"",italics:"",replaceMode:!1,interval:null},"undefined"===typeof e.location.state?a.state=a.baseState:a.state={SentenceElements:e.location.state.sentenceElements,formerSentenceRawText:e.location.state.formerSentenceRawText,formerSentenceCleanText:e.location.state.formerSentenceCleanText,selectedWordId:null,wordToTeach:e.location.state.wordToTeach,containsWordToTeach:e.location.state.containsWordToTeach,points:e.location.state.points,punctuationMode:!1,selectedPunctuationId:null,pinyin:e.location.state.pinyin,english:e.location.state.english,italics:e.location.state.italics,interval:e.location.state.interval,replaceMode:!0},a}return Object(s.a)(n,[{key:"get_word_array",value:function(e,t){var n=this.state.wordToTeach;return n&&n.text.length&&1===t?[n].concat(Object(L.a)(e.addable_words)):n&&n.text.length&&t>1?e.addable_words:e.teachable_words}},{key:"submitSentenceData",value:function(e,t,n,a){var r=this.state.SentenceElements,l=r.filter((function(e){return e.hasOwnProperty("word_id")})),i=l.map((function(e){return e.text})),o=i.join("");e.includes(o)&&o!==this.state.formerSentenceCleanText?alert("Already used this sentence. Please change it."):a({variables:this.getSentenceVariables(r,l,i,o,t,n)})}},{key:"getSentenceVariables",value:function(e,t,n,a,r,l){var i=this.state,o=i.wordToTeach,c=i.pinyin,s=i.english,u=i.italics,d=i.formerSentenceRawText,m=i.replaceMode,p=n.filter((function(e){return e!==o.text})),h=e.map((function(e){return e.text})).join(""),g=h.replace(new RegExp(o.text,"g"),"#"),v=t.map((function(e){return e.alt_text})).join(""),x=e.map((function(e){return e.alt_text||e.text})).join(""),f=x.replace(new RegExp(o.alt_text,"g"),"#"),w=1===l&&r<5,_={rawSentenceTextSimplified:h,cleanSentenceTextSimplified:a,displaySentenceTextSimplified:g,rawSentenceTextTraditional:x,cleanSentenceTextTraditional:v,displaySentenceTextTraditional:f,pinyin:c,english:s,italics:u,wordToTeachText:o.text,wordToTeachId:o.word_id,sentenceContainedWordListSimplified:p,currentInterval:r};return m?Object.assign(_,{formerSentenceRawText:d}):Object.assign(_,{shouldCall:w}),_}},{key:"appendElement",value:function(e){var t=this;e.hasOwnProperty("word_id")?this.setState((function(n){return{points:n.points+e.level.points,containsWordToTeach:e.word_id===t.state.wordToTeach.word_id?n.containsWordToTeach+1:n.containsWordToTeach,SentenceElements:[].concat(Object(L.a)(n.SentenceElements),[e])}})):this.setState((function(t){return{SentenceElements:[].concat(Object(L.a)(t.SentenceElements),[e])}}))}},{key:"popElement",value:function(){var e=this;this.state.SentenceElements[this.state.SentenceElements.length-1].hasOwnProperty("word_id")?this.setState((function(t){return{points:t.points-t.SentenceElements[t.SentenceElements.length-1].level.points,containsWordToTeach:t.SentenceElements[t.SentenceElements.length-1].word_id===e.state.wordToTeach.word_id?t.containsWordToTeach-1:t.containsWordToTeach,SentenceElements:t.SentenceElements.slice(0,-1)}})):this.setState((function(e){return{SentenceElements:e.SentenceElements.slice(0,-1)}}))}},{key:"getColor",value:function(e,t){var n="white",a=t+5;return e.hasOwnProperty("times_used")&&(n=y.find((function(n){return n.times_used+t===parseInt(e.times_used)||5===n.times_used&&parseInt(e.times_used)>=a})).color),n}},{key:"render",value:function(){var e=this,t=this.state,n=t.SentenceElements,a=t.wordToTeach,r=t.points,i=t.selectedWordId,o=t.containsWordToTeach,c=t.punctuationMode,s=t.selectedPunctuationId;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C.b,{query:q},(function(t){var u=t.loading,d=t.error,m=t.data,p=t.refetch;if(u)return l.a.createElement("div",null,"Fetching");if(d)return l.a.createElement("div",null,"Error");var h=e.state.interval||m.Author[0].interval,g=e.get_word_array(m.Author[0].level,h.interval_order),v=parseInt(m.Author[0].level.minimum_usage);return l.a.createElement("div",null,l.a.createElement("div",{className:"Author-dashboard"},l.a.createElement("p",null,"Interval: "+h.interval_order),l.a.createElement("p",null,"Minimum points: "+h.min_length),l.a.createElement("p",null,"Maximum points:: "+h.max_length),l.a.createElement("p",null,"Current Points: "+r)),l.a.createElement("p",null,"Word being learned: ",a.text),l.a.createElement("div",null,l.a.createElement("p",{style:{fontSize:"30px"}},n.length?n.map((function(e){return e.text})).join(""):null),l.a.createElement("button",{onClick:e.popElement.bind(e),hidden:0===n.length},"Backspace")),l.a.createElement(D,{isOn:c,handleToggle:function(){return e.setState((function(e){return{punctuationMode:!e.punctuationMode}}))}}),c?l.a.createElement("div",null,l.a.createElement(M.a,{styles:z,value:{value:s,label:s&&E.find((function(e){return e.id===s})).text},options:E.map((function(e){return{label:e.text,value:e.id}})),onChange:function(t){return e.setState({selectedPunctuationId:parseInt(t.value)})}}),l.a.createElement("button",{onClick:function(){return e.appendElement(E.find((function(e){return e.id===s})))}},"Add")):l.a.createElement("div",null,l.a.createElement(M.a,{styles:z,value:{value:i,label:i&&g.find((function(e){return e.word_id===i})).text},options:g.map((function(t){return{label:t.text,value:t.word_id,color:e.getColor(t,v)}})),onChange:function(t){return e.setState({selectedWordId:parseInt(t.value)})}}),l.a.createElement("button",{onClick:a.text.length?function(){return e.appendElement(g.find((function(e){return e.word_id===i})))}:function(){e.setState({wordToTeach:g.find((function(e){return e.word_id===i}))})}},a.text.length?"Add":"Learn")),l.a.createElement("div",null,l.a.createElement("input",{value:e.state.pinyin,onChange:function(t){return e.setState({pinyin:t.target.value})},type:"pinyin",placeholder:"Enter sentence's pinyin",style:{width:"250px"}})),l.a.createElement("div",null,l.a.createElement("input",{value:e.state.english,onChange:function(t){return e.setState({english:t.target.value})},type:"english",placeholder:"Enter sentence's english translation",style:{width:"250px"}})),l.a.createElement("div",null,l.a.createElement("input",{value:e.state.italics,onChange:function(t){return e.setState({italics:t.target.value})},type:"italics",placeholder:"Enter sentence's extra notes",style:{width:"250px"}})),l.a.createElement(C.a,{mutation:e.state.replaceMode?B:U,update:function(t){e.setState(e.baseState),p()}},(function(t){return l.a.createElement("button",{onClick:function(){e.submitSentenceData(h.sentences.map((function(e){return e.clean_text})),h.interval_order,m.Author[0].level.teachable_words.length,t)},disabled:!o},"Submit")})),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.setState(e.baseState)}},"Clear Sentence")))}))))}}]),n}(r.Component);function V(){var e=Object(v.a)(["\n  query getSentences($levelNumber: Int! $intervalOrder: Int!) {\n\tgetSentenceList(levelNumber: $levelNumber intervalOrder: $intervalOrder) {\n\t\traw_text\n\t\tclean_text\n\t\twords_contained{\n\t\t\tcontains_order\n\t\t\tWord{\n\t\t\t\tword_id\n\t\t\t\ttext\n\t\t\t\talt_text\n\t\t\t\tlevel{\n\t\t\t\t\tpoints\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdisplay_text\n\t\tword_taught{\n\t\t\tword_id\n\t\t\ttext\n\t\t\talt_text\n\t\t\tlevel{\n\t\t\t\tpoints\n\t\t\t}\n\t\t}\n\t\tpinyin\n\t\tenglish\n\t\titalics\n\t\tinterval{\n\t        sentences{\n\t          clean_text\n\t        }\n\t\t\tinterval_order\n      \t\tseconds\n      \t\tmin_length\n      \t\tmax_length\n\t\t}\n\t}\n  }\n"]);return V=function(){return e},e}function G(){var e=Object(v.a)(["\n  query getDropdowns($userName: String!) {\n\tgetIntervalsAndLevels(userName: $userName) {\n\t\tlevels\n\t\tintervals\n\t}\n  }\n"]);return G=function(){return e},e}var J=T()(G()),Q=T()(V()),X=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedLevel:1,selectedInterval:1},e}return Object(s.a)(n,[{key:"getDropdowns",value:function(e){var t=this;return l.a.createElement(C.b,{query:J,variables:{userName:"test"}},(function(e){var n=e.loading,a=e.error,r=e.data;e.refetch;return n?l.a.createElement("div",null,"Fetching"):a?l.a.createElement("div",null,"Error"):l.a.createElement("div",null,"Level: ",l.a.createElement("select",{onChange:function(e){return t.setState({selectedLevel:parseInt(e.target.value)})}},r.getIntervalsAndLevels.levels.map((function(e){return l.a.createElement("option",{value:e,selected:e===t.state.selectedLevel},e)}))),"Interval: ",l.a.createElement("select",{onChange:function(e){return t.setState({selectedInterval:parseInt(e.target.value)})}},r.getIntervalsAndLevels.intervals.map((function(e){return l.a.createElement("option",{value:e,selected:e===t.state.selectedInterval},e)}))))}))}},{key:"parseSentence",value:function(e){var t=0,n=[],a=null,r=0,l=0,i=e.display_text;for(console.log(e),e.words_contained.sort((function(e,t){return e.contains_order-t.contains_order}));i.length;)"#"===i[0]?(n.push({text:e.word_taught.text,alt_text:e.word_taught.alt_text,word_id:e.word_taught.word_id,level:{points:e.word_taught.level.points}}),null===a&&(a={text:e.word_taught.text,alt_text:e.word_taught.alt_text,word_id:e.word_taught.word_id,level:{points:e.word_taught.level.points}}),i=i.substring(1),r++,l+=e.word_taught.level.points):e.words_contained[t]&&e.words_contained[t].Word.text[0]===i[0]?(console.log(e),n.push({text:e.words_contained[t].Word.text,alt_text:e.words_contained[t].Word.alt_text,word_id:e.words_contained[t].Word.word_id,level:{points:e.words_contained[t].Word.level.points}}),i=i.substring(e.words_contained[t].Word.text.length),l+=e.words_contained[t].Word.level.points,t++):(n.push({text:i[0]}),i=i.substring(1));this.props.history.push({pathname:"/author",state:{sentenceElements:n,formerSentenceRawText:e.raw_text,formerSentenceCleanText:e.clean_text,wordToTeach:a,containsWordToTeach:r,pinyin:e.pinyin,english:e.english,italics:e.italics,points:l,interval:e.interval}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C.b,{query:Q,variables:{levelNumber:this.state.selectedLevel,intervalOrder:this.state.selectedInterval}},(function(t){var n=t.loading,a=t.error,r=t.data;t.refetch;return n?l.a.createElement("div",null,"Fetching"):a?l.a.createElement("div",null,"Error"):l.a.createElement("div",null,e.getDropdowns(),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Sentence"),l.a.createElement("th",null,"Word Taught"),l.a.createElement("th",null,"Pinyin"),l.a.createElement("th",null,"Translation"),l.a.createElement("th",null,"Notes"))),l.a.createElement("tbody",null,r.getSentenceList.map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",null,t.raw_text),l.a.createElement("td",null,t.word_taught.text),l.a.createElement("td",null,t.pinyin),l.a.createElement("td",null,t.english),l.a.createElement("td",null,t.italics),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.parseSentence(t)}},"Edit")))})))))}))))}}]),n}(r.Component);function Y(){var e=Object(v.a)(["\n  query getWords {\n\tLevel {\n\t\tall_words{\n\t\t\tword_id\n\t\t\ttext\n\t\t\tpinyin\n\t\t\tenglish\n\t\t\titalics\n\t\t\ttimes_used\n\t\t\tlevel{\n\t\t\t\tlevel_number\n\t\t\t}\n\t\t}\n\t}\n  }\n"]);return Y=function(){return e},e}var K=T()(Y()),Z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"editWord",value:function(e){this.props.history.push({pathname:"/wordedit",state:{word_id:e.word_id,text:e.text,pinyin:e.pinyin,english:e.english,italics:e.italics}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C.b,{query:K},(function(t){var n=t.loading,a=t.error,r=t.data;t.refetch;if(n)return l.a.createElement("div",null,"Fetching");if(a)return l.a.createElement("div",null,"error");var i=r.Level[0].all_words;return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Word"),l.a.createElement("th",null,"Pinyin"),l.a.createElement("th",null,"Translation"),l.a.createElement("th",null,"Notes"),l.a.createElement("th",null,"Times Used"),l.a.createElement("th",null,"Level"))),l.a.createElement("tbody",null,i.map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",null,t.text),l.a.createElement("td",null,t.pinyin),l.a.createElement("td",null,t.english),l.a.createElement("td",null,t.italics),l.a.createElement("td",null,t.times_used),l.a.createElement("td",null,t.level?t.level.level_number:0),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.editWord(t)}},"Edit")))}))))}))))}}]),n}(r.Component);function ee(){var e=Object(v.a)(["\n  mutation editWord($word_id: Int!, $english: String, $italics: String) {\n  \tUpdateWord(word_id: $word_id, english: $english, italics: $italics){\n  \t\tword_id\n  \t\ttext\n  \t}\n  }\n"]);return ee=function(){return e},e}var te=T()(ee()),ne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={word_id:e.location.state.word_id,text:e.location.state.text,pinyin:e.location.state.pinyin,english:e.location.state.english,italics:e.location.state.italics},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,this.state.text),l.a.createElement("p",null,this.state.pinyin),l.a.createElement("p",null,"Translation"),l.a.createElement("input",{value:this.state.english,onChange:function(t){return e.setState({english:t.target.value})},type:"english",placeholder:"Enter word's english translation",style:{width:"250px"}}),l.a.createElement("p",null,"Notes"),l.a.createElement("input",{value:this.state.italics,onChange:function(t){return e.setState({italics:t.target.value})},type:"italics",placeholder:"Enter word's extra notes",style:{width:"250px"}}),l.a.createElement(C.a,{mutation:te,update:function(t){e.props.history.push({pathname:"/words"})}},(function(t){return l.a.createElement("button",{onClick:function(){return t({variables:{word_id:parseInt(e.state.word_id),english:e.state.english,italics:e.state.italics}})},disabled:0===e.state.english.length},"Submit")}))))}}]),n}(r.Component),ae=n(39),re=function(e){var t=e.bgcolor,n=e.completed,a={height:"100%",width:"".concat(n,"%"),backgroundColor:t,borderRadius:"inherit",textAlign:"right"};return l.a.createElement("div",{style:{height:20,width:"100%",backgroundColor:"#e0e0de",borderRadius:50}},l.a.createElement("div",{style:a}))};function le(){var e=Object(v.a)(["\n  query getSentence($userName: String!) {\n\tgetNextSentence(userName: $userName) {\n\t\t_id\n    time_fetched\n\t\tnext_interval_sentence_id\n\t\traw_text\n\t\tdisplay_text\n    clean_text\n\t\tpinyin\n\t\tenglish\n    italics\n    interval{\n      interval_order\n    }\n    current_users{\n      user_name\n    }\n    already_seen\n\t\tword_taught{\n      word_id\n\t\t\ttext\n\t\t\tenglish\n      pinyin\n\t\t\tcharacters{\n\t\t\t\ttext\n\t\t\t\tenglish\n\t\t\t}\n\t\t}\n\n\t}\n  getCurrentProgress(userName: $userName){\n    words_learned\n    intervals_completed\n    total_word_count\n  }\n\n  }\n\n"]);return le=function(){return e},e}function ie(){var e=Object(v.a)(["\n  mutation makeAttempt($userName: String!, $sentenceId: Int!, $isCorrect: Boolean!, $alreadySeen: Boolean!, $nextIntervalSentenceId: Int) {\n\tmakeClozeAttempt(userName: $userName, sentenceId: $sentenceId, isCorrect: $isCorrect,alreadySeen: $alreadySeen, nextIntervalSentenceId: $nextIntervalSentenceId)\n  }\n\n"]);return ie=function(){return e},e}var oe=T()(ie()),ce=T()(le()),se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={showAnswer:!1,showCharacterDefinitions:!1,userResponse:"",isCorrect:!0,lastSentenceId:null,audio:null,timeFetched:null},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"checkAnswer",value:function(e){return e===this.state.userResponse}},{key:"setAudio",value:function(e,t,n){return e?new ae.Howl({src:["/audio/sentences/"+t+".m4a"]}):new ae.Howl({src:["/audio/words/"+n+".m4a"]})}},{key:"playSound",value:function(){this.state.audio&&this.state.audio.play()}},{key:"getFontColor",value:function(){var e="black";return this.state.showAnswer&&(e=this.state.isCorrect?"green":"grey"),e}},{key:"submitAnswer",value:function(e,t,n,a,r,l,i,o){this.state.showAnswer?this.setState({showAnswer:!1,userResponse:"",timeFetched:r,showCharacterDefinitions:!1,audio:null},(function(){t()})):e({variables:{userName:n,sentenceId:a,isCorrect:l,alreadySeen:i,nextIntervalSentenceId:o}})}},{key:"getText",value:function(e){return l.a.createElement("div",{style:{display:"flex",flexDirectioion:"row",justifyContent:"center"}},l.a.createElement("p",null,e.english)," ",l.a.createElement("i",{style:{marginBlockStart:"1em"}},e.italics))}},{key:"render",value:function(){var e=this,t=localStorage.getItem("user_name");return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C.b,{query:ce,variables:{userName:t}},(function(n){var a=n.loading,r=n.error,i=n.data,o=n.refetch;if(a)return l.a.createElement("div",null,"Fetching");if(r)return l.a.createElement("div",null,"error");if(e.state.timeFetched===i.getNextSentence.time_fetched)return l.a.createElement("div",null);if(i.getNextSentence){var c=parseInt(i.getNextSentence._id),s=i.getNextSentence.already_seen,u=null;return i.getNextSentence.next_interval_sentence_id&&s&&(u=i.getNextSentence.next_interval_sentence_id),l.a.createElement("div",{style:{width:"50%"}},l.a.createElement("p",null,"Words Learned: "+i.getCurrentProgress.words_learned+"/"+i.getCurrentProgress.total_word_count),l.a.createElement("p",null,"Cards Completed: "+i.getCurrentProgress.intervals_completed),l.a.createElement(re,{bgcolor:"rgb(245 109 109)",completed:i.getCurrentProgress.intervals_completed/(7*i.getCurrentProgress.total_word_count)*100}),l.a.createElement("div",null,e.state.showAnswer&&l.a.createElement("button",{onClick:function(){return e.playSound(s,i.getNextSentence._id,i.getNextSentence.word_taught.word_id)}},"play"),e.state.showAnswer&&i.getNextSentence.word_taught.characters.length>0&&l.a.createElement("button",{onClick:function(){return e.setState((function(e){return{showCharacterDefinitions:!e.showCharacterDefinitions}}))}},"Character Definitions"),e.state.showCharacterDefinitions&&i.getNextSentence.word_taught.characters.map((function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.text),l.a.createElement("p",null,e.english))})),l.a.createElement("div",{style:{display:"flex",flexDirectioion:"row",justifyContent:"center"}},s?e.getText(i.getNextSentence):e.getText(i.getNextSentence.word_taught),e.state.showAnswer&&l.a.createElement("div",{style:{display:"flex",flexDirectioion:"row",justifyContent:"center"}},l.a.createElement("p",null,"|-----------|")," ",l.a.createElement("p",null,s?i.getNextSentence.pinyin:i.getNextSentence.word_taught.pinyin))),l.a.createElement(C.a,{mutation:oe,update:function(t){e.state.showAnswer||e.setState({showAnswer:!0,showCharacterDefinitions:!1,userResponse:i.getNextSentence.word_taught.text,isCorrect:e.checkAnswer(i.getNextSentence.word_taught.text),audio:e.setAudio(s,i.getNextSentence._id,i.getNextSentence.word_taught.word_id)},(function(){e.playSound()}))}},(function(n){return l.a.createElement("div",{style:{display:"flex",flexDirectioion:"row",justifyContent:"center"}},s&&l.a.createElement("p",null,i.getNextSentence.display_text.substr(0,i.getNextSentence.display_text.indexOf("#"))),l.a.createElement("input",{style:{width:"".concat(25*i.getNextSentence.word_taught.text.length,"px"),fontSize:"calc(10px + 2vmin)",margin:"15px 5px 15px 5px",color:e.getFontColor()},value:e.state.userResponse,onChange:function(t){return e.setState({userResponse:t.target.value})},onKeyDown:function(a){"Enter"===a.key&&e.submitAnswer(n,o,t,c,i.getNextSentence.time_fetched,e.checkAnswer(i.getNextSentence.word_taught.text),s,u)}}),s&&l.a.createElement("p",null,i.getNextSentence.display_text.substr(i.getNextSentence.display_text.indexOf("#")+1,i.getNextSentence.display_text.length)),l.a.createElement("button",{style:{margin:"15px 5px 15px 5px"},onClick:function(){e.submitAnswer(n,o,t,c,i.getNextSentence.time_fetched,e.checkAnswer(i.getNextSentence.word_taught.text),s,u)}},(e.state.showAnswer,">")))}))),l.a.createElement("div",null,l.a.createElement("p",{style:{fontSize:"12px"}},s&&i.getNextSentence.clean_text!==i.getNextSentence.word_taught.text&&i.getNextSentence.word_taught.english)),e.state.showAnswer&&s&&l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",flexDirectioion:"row",justifyContent:"center"}},l.a.createElement("p",null,i.getNextSentence.word_taught.text),l.a.createElement("p",{style:{marginLeft:"5px"}},i.getNextSentence.word_taught.pinyin))))}return l.a.createElement("div",null,"Complete")}))))}}]),n}(r.Component),ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"HOME")))}}]),n}(r.Component),de=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(W,null),l.a.createElement("div",null,l.a.createElement(m.c,null,l.a.createElement(m.a,{exact:!0,path:"/",component:ue}),"ADMIN"===w()&&l.a.createElement(m.a,{exact:!0,path:"/author",component:H}),"ADMIN"===w()&&l.a.createElement(m.a,{exact:!0,path:"/editor",component:X}),"ADMIN"===w()&&l.a.createElement(m.a,{exact:!0,path:"/words",component:Z}),"ADMIN"===w()&&l.a.createElement(m.a,{exact:!0,path:"/wordedit",component:ne}),l.a.createElement(m.a,{exact:!0,path:"/play",component:se}),l.a.createElement(m.a,{exact:!0,path:"/login",component:j}))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=n(7),pe=n(23),he=n(53),ge=n(52),ve=n(51),xe=Object(he.a)({uri:""}),fe=Object(ve.a)((function(e,t){var n=t.headers,r=x();return{headers:Object(a.a)(Object(a.a)({},n),{},{authorization:r?"Bearer ".concat(r):""})}})),we=new pe.a({link:fe.concat(xe),cache:new ge.a});o.a.render(l.a.createElement(k.a,null,l.a.createElement(me.a,{client:we},l.a.createElement(de,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.3c8e2b9f.chunk.js.map