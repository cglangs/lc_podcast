{"version":3,"sources":["components/Login.js","utils.js","components/Header.js","constants.js","components/Switch.js","components/Author.js","components/Editor.js","components/Words.js","components/WordEdit.js","components/ProgressBar.js","components/Modal.js","components/Play.js","components/App.js","serviceWorker.js","index.js"],"names":["SIGNUP_MUTATION","gql","UPGRADE_MUTATION","LOGIN_MUTATION","Login","state","isLogin","email","password","user_name","userId","role","_confirm","data","a","props","history","push","window","location","reload","this","user","_id","setUserInfo","parseInt","setState","className","value","onChange","e","target","type","placeholder","mutation","variables","onCompleted","onClick","Component","withRouter","getCookie","cname","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","Header","isLoggedIn","to","punctuations","id","text","colors","times_used","color","Switch","isOn","handleToggle","checked","style","background","htmlFor","GET_LEVEL_WORDS","ADD_SENTENCE","REPLACE_SENTENCE","customStyles","option","styles","backgroundColor","Author","baseState","SentenceElements","formerSentenceRawText","formerSentenceCleanText","selectedWordId","wordToTeach","word_id","containsWordToTeach","points","punctuationMode","selectedPunctuationId","pinyin","english","italics","replaceMode","interval","sentenceElements","level","interval_order","addable_words","teachable_words","clean_sentences","words_left","addSentence","sentenceWords","filter","element","hasOwnProperty","sentenceWordListSimplified","map","word","cleanSentenceTextSimplified","join","includes","alert","getSentenceVariables","sentenceContainedWordListSimplified","rawSentenceTextSimplified","displaySentenceTextSimplified","replace","RegExp","cleanSentenceTextTraditional","alt_text","rawSentenceTextTraditional","displaySentenceTextTraditional","shouldCall","resultObj","wordToTeachText","wordToTeachId","currentInterval","Object","assign","newElement","prevState","slice","minimum_usage","max_usage","find","colorType","query","loading","error","refetch","wordArray","get_word_array","min_length","max_length","fontSize","popElement","bind","hidden","label","mark","options","appendElement","getColor","width","update","store","submitSentenceData","sentences","sentence","clean_text","disabled","GET_DROPDOWNS","GET_SENTENCE_LIST","Editor","selectedLevel","selectedInterval","userName","getIntervalsAndLevels","levels","selected","intervals","current_index","display_text_copy","display_text","console","log","words_contained","sort","previous","next","contains_order","word_taught","Word","pathname","raw_text","levelNumber","intervalOrder","getDropdowns","getSentenceList","parseSentence","GET_WORDS","Words","word_list","Level","all_words","level_number","editWord","EDIT_WORD","WordEdit","ProgressBar","bgcolor","completed","fillerStyles","height","borderRadius","textAlign","Modal","handleClose","show","characters","showHideClassName","char","MAKE_ATTEMPT","CREATE_USER","GET_SENTENCE","Play","showModal","showCharacterDefinitions","hideModal","refetchUser","showAnswer","isSubmitted","userResponse","isCorrect","lastSentenceId","audio","timeFetched","prevProps","correct_response","sentenceId","Howl","src","play","makeAttempt","correctResponse","time_fetched","nextIntervalSentenceId","playSound","display","flexDirectioion","justifyContent","getNextSentence","next_interval_sentence_id","getCurrentProgress","words_learned","total_word_count","intervals_completed","flexDirection","getText","checkAnswer","setAudio","substr","margin","getFontColor","onKeyDown","key","submitAnswer","marginLeft","playDashboard","createUser","GET_USER","App","me","exact","path","render","component","Boolean","hostname","match","httpLink","createHttpLink","uri","credentials","client","ApolloClient","link","cache","InMemoryCache","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.0d44deba.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport gql from 'graphql-tag'\nimport { Mutation} from 'react-apollo'\nimport { withRouter } from 'react-router-dom';\n\n\nconst SIGNUP_MUTATION = gql`\n  mutation SignupMutation($email: String!, $password: String!, $user_name: String!) {\n    CreateUser(email: $email, password: $password, user_name: $user_name) {\n      _id\n      user_name\n      password\n      token\n      role\n    }\n  }\n`\nconst UPGRADE_MUTATION = gql`\n  mutation UpgradeMutation($email: String!, $password: String!, $user_name: String!, $userId: Int!) {\n    UpgradeUser(email: $email, password: $password, user_name: $user_name, userId: $userId) {\n      _id\n      user_name\n      password\n      token\n      role\n    }\n  }\n`\n\nconst LOGIN_MUTATION = gql`\n  mutation LoginMutation($email: String!, $password: String!) {\n    Login(email: $email, password: $password) {\n      _id\n      user_name\n      password\n      token\n      role\n    }\n  }\n`\n\nclass Login extends Component {\n  state = {\n    isLogin: true, // switch between Login and SignUp\n    email: '',\n    password: '',\n    user_name: '',\n    userId: null,\n    role: \"TESTER\"\n  }\n\n  componentDidMount(){\n    if(this.props.user){\n      const {user_name, _id ,role} = this.props.user\n      this.setUserInfo(user_name, parseInt(_id), role)\n    }\n  }\n\n  setUserInfo(user_name, userId, role){\n    this.setState({user_name, userId: userId, role: role})\n\n  }\n\n render() {\n    const { isLogin, email, password, user_name, userId, role} = this.state\n    return (\n    <div>\n      <h4>{isLogin ? 'Login' : 'Sign Up'}</h4>\n\n      <div className=\"flex flex-column\">\n        {!isLogin && (\n          <input\n            value={user_name}\n            onChange={e => this.setState({ user_name: e.target.value })}\n            type=\"text\"\n            placeholder=\"Your name\"\n          />\n        )}\n        <input\n          value={email}\n          onChange={e => this.setState({ email: e.target.value })}\n          type=\"text\"\n          placeholder=\"Your email address\"\n        />\n        <input\n          value={password}\n          onChange={e => this.setState({ password: e.target.value })}\n          type=\"password\"\n          placeholder=\"Choose a safe password\"\n        />\n      </div>\n      <div>\n      <Mutation\n        mutation={isLogin ? LOGIN_MUTATION : role === 'TESTER' ? UPGRADE_MUTATION : SIGNUP_MUTATION}\n        variables={{ email, password, user_name, userId}}\n        onCompleted={data => this._confirm(data)}\n      >\n        {mutation => (\n          <button\n            type=\"button\"\n            onClick={mutation}\n          >\n            {isLogin ? 'login' : 'create account'}\n          </button>\n        )}\n      </Mutation>\n      <button\n        type=\"button\"\n        onClick={() => this.setState({ isLogin: !this.state.isLogin })}\n      >\n        {isLogin ? 'need to create an account?' : 'already have an account?'}\n      </button>\n      </div>\n    </div>\n  )\n\n }\n\n _confirm = async data => {\n  this.props.history.push('/')\n  window.location.reload(true);\n  //this.props.refetchUser()\n}\n\n\n}\n\n\nexport default withRouter(Login)","export const getCookie = (cname) => {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n  for(var i = 0; i <ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}","import React, { Component } from 'react'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { getCookie} from '../utils'\n\nclass Header extends Component {\n\n  render() {\n    const isLoggedIn = !!getCookie('access-token');\n\n    return (\n      <div>\n        <div>Chinese App</div>\n        <Link to=\"/\">\n            play\n          </Link>\n          <div>\n        {isLoggedIn && this.props.user && this.props.user.role === 'ADMIN' && (\n          <div>\n            <div className=\"flex\">\n              <Link to=\"/author\">\n                author\n              </Link>\n            </div>\n            <div className=\"flex\">\n              <Link to=\"/editor\">\n                editor\n              </Link>\n            </div>\n            <div className=\"flex\">\n              <Link to=\"/words\">\n                words\n              </Link>\n            </div>\n          </div>\n          )}\n          </div>   \n        <div className=\"flex flex-fixed\">\n          {isLoggedIn && this.props.user && this.props.user.role !== 'TESTER' ? (\n            <div\n              onClick={() => {\n                document.cookie = \"access-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n                document.cookie = \"refresh-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n                this.props.history.push('/')\n                window.location.reload(true);\n\n                //this.props.refetchUser()\n              }}\n            >\n              logout\n            </div>\n          ) : (\n            <Link to=\"/login\">\n              login\n            </Link>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Header)","export const punctuations = [\n\t{id: 1, text: '，', type: 'COMMA'},\n\t{id: 2, text: '。', type: 'PERIOD'},\n\t{id: 3, text: '”', type: 'QUOTE'},\n\t{id: 4, text: '！', type: 'EXCLAMATION'},\n\t{id: 5, text: '？', type: 'QUESTION'},\n\t{id: 6, text: '：', type: 'COLON'},\n\t{id: 7, text: '0', type: 'ZERO'},\n\t{id: 8, text: '1', type: 'ONE'},\n\t{id: 9, text: '2', type: 'TWO'},\n\t{id: 10, text: '3', type: 'THREE'},\n\t{id: 11, text: '4', type: 'FOUR'},\n\t{id: 12, text: '5', type: 'FIVE'},\n\t{id: 13, text: '6', type: 'SIX'},\n\t{id: 14, text: '7', type: 'SEVEN'},\n\t{id: 15, text: '8', type: 'EIGHT'},\n\t{id: 16, text: '9', type: 'NINE'},\n\t{id: 17, text: ' ', type: 'SPACE'},\n\t{id: 18, text: 'Smith', type: 'NAME'}\n]\n\nexport const colors = [\n\t{times_used: 0, color: 'lightblue'},\n\t{times_used: 1, color: 'pink'},\n\t{times_used: 2, color: 'yellow'},\n\t{times_used: 3, color: 'lightgreen'},\n\t{times_used: 4, color: 'coral'},\n\t{times_used: 5, color: 'blueviolet'}\n]","import React from 'react';\nimport '../styles/Switch.css';\n\nconst Switch = ({ isOn, handleToggle }) => {\n  return (\n    <>\n      <input\n        checked={isOn}\n        onChange={handleToggle}\n        className=\"react-switch-checkbox\"\n        id={`react-switch-new`}\n        type=\"checkbox\"\n      />\n      <label\n        style={{ background: isOn && '#06D6A0' }}\n        className=\"react-switch-label\"\n        htmlFor={`react-switch-new`}\n      >\n        <span className={`react-switch-button`} />\n      </label>\n    </>\n  );\n};\n\nexport default Switch;","import React, { Component } from 'react'\nimport gql from 'graphql-tag';\nimport { Mutation, Query} from 'react-apollo';\nimport '../styles/App.css';\nimport {punctuations, colors} from '../constants.js'\nimport Switch from \"./Switch\";\nimport Select from \"react-select\";\n\n\nexport const GET_LEVEL_WORDS = gql`\n  query GetLevelWords{\n  Author{\n    level{\n      level_number\n      points\n      minimum_usage\n      teachable_words{\n        text\n        alt_text\n        word_id\n        level{\n          points\n        }\n      }\n      addable_words{\n        text\n        alt_text\n        word_id\n        times_used\n        level{\n          points\n        }\n      }\n    }\n    interval{\n      sentences{\n        clean_text\n      }\n      interval_order\n      seconds\n      min_length\n      max_length\n    }\n  }\n}\n`\n\nconst ADD_SENTENCE = gql`\n  mutation addsentence($rawSentenceTextSimplified: String!, $cleanSentenceTextSimplified: String!, $displaySentenceTextSimplified: String!,$rawSentenceTextTraditional: String!, $cleanSentenceTextTraditional: String!, $displaySentenceTextTraditional: String!, $pinyin: String!, $english: String!, $italics: String!, $wordToTeachId: Int!, $sentenceContainedWordListSimplified: [String!], $currentInterval: Int!, $shouldCall: Boolean!) {\n    CreateSentence(raw_text: $rawSentenceTextSimplified, clean_text: $cleanSentenceTextSimplified, display_text: $displaySentenceTextSimplified, alt_raw_text: $rawSentenceTextTraditional, alt_clean_text: $cleanSentenceTextTraditional, alt_display_text: $displaySentenceTextTraditional, pinyin: $pinyin, english: $english, italics: $italics) {\n      raw_text\n    }\n    AddSentenceLevel(from: {raw_text:  $rawSentenceTextSimplified} to: {level_number: 1}){\n      from {raw_text}\n      to {level_number}\n    }\n    AddSentenceWord_taught(from: {raw_text: $rawSentenceTextSimplified} to: {word_id: $wordToTeachId}){\n      from {raw_text}\n      to {text}\n    }\n    AddSentenceInterval(from: {raw_text: $rawSentenceTextSimplified} to: {interval_order: $currentInterval}){\n      from {raw_text}\n      to {interval_order}\n    }\n    AddSentenceDependencies(src_sentence: $rawSentenceTextSimplified, dest_words: $sentenceContainedWordListSimplified){\n      raw_text\n      display_text\n    }\n    IncrementInterval(should_call: $shouldCall)\n  }\n\n`\n\nconst REPLACE_SENTENCE = gql`\n  mutation replacesentence($rawSentenceTextSimplified: String!, $cleanSentenceTextSimplified: String!, $displaySentenceTextSimplified: String!,$rawSentenceTextTraditional: String!, $cleanSentenceTextTraditional: String!, $displaySentenceTextTraditional: String!, $pinyin: String!, $english: String!, $italics: String! $wordToTeachId: Int!, $sentenceContainedWordListSimplified: [String!], $currentInterval: Int!, $formerSentenceRawText: String!) {\n    DeleteSentence(raw_text: $formerSentenceRawText){\n      raw_text\n    }\n    CreateSentence(raw_text: $rawSentenceTextSimplified, clean_text: $cleanSentenceTextSimplified, display_text: $displaySentenceTextSimplified, alt_raw_text: $rawSentenceTextTraditional, alt_clean_text: $cleanSentenceTextTraditional, alt_display_text: $displaySentenceTextTraditional, pinyin: $pinyin, english: $english,, italics: $italics) {\n      raw_text\n    }\n    AddSentenceLevel(from: {raw_text:  $rawSentenceTextSimplified} to: {level_number: 1}){\n      from {raw_text}\n      to {level_number}\n    }\n    AddSentenceWord_taught(from: {raw_text: $rawSentenceTextSimplified} to: {word_id: $wordToTeachId}){\n      from {raw_text}\n      to {text}\n    }\n    AddSentenceInterval(from: {raw_text: $rawSentenceTextSimplified} to: {interval_order: $currentInterval}){\n      from {raw_text}\n      to {interval_order}\n    }\n    AddSentenceDependencies(src_sentence: $rawSentenceTextSimplified, dest_words: $sentenceContainedWordListSimplified){\n      raw_text\n      display_text\n    }\n  }\n\n`\nconst customStyles = {\n\n  option: (styles, { data}) => {\n    return {\n      ...styles,\n      color: \"black\",\n      backgroundColor: data.color\n    }\n  }\n\n}\n\nclass Author extends Component {\n  constructor(props){\n    super(props)\n    this.baseState = {\n        SentenceElements: [],\n        formerSentenceRawText: null,\n        formerSentenceCleanText: null,\n        selectedWordId: null,\n        wordToTeach: {text: '', word_id: null},\n        containsWordToTeach: 0,\n        points: 0,\n        punctuationMode: false,\n        selectedPunctuationId: null,\n        pinyin: '',\n        english: '',\n        italics: '',\n        replaceMode: false,\n        interval: null\n      }\n    if(typeof props.location.state === 'undefined'){\n      this.state = this.baseState\n    } else {\n        this.state = {\n          SentenceElements: props.location.state.sentenceElements,\n          formerSentenceRawText: props.location.state.formerSentenceRawText,\n          formerSentenceCleanText: props.location.state.formerSentenceCleanText,\n          selectedWordId: null,\n          wordToTeach: props.location.state.wordToTeach,\n          containsWordToTeach: props.location.state.containsWordToTeach,\n          points: props.location.state.points,\n          punctuationMode: false,\n          selectedPunctuationId: null,\n          pinyin: props.location.state.pinyin,\n          english: props.location.state.english,\n          italics: props.location.state.italics,\n          interval: props.location.state.interval,\n          replaceMode: true\n        }\n      }\n  }\n\n  get_word_array(level, interval_order) {\n    let arr = []\n    const wordToTeach = this.state.wordToTeach\n    if(wordToTeach && wordToTeach.text.length && interval_order === 1){\n        arr = [wordToTeach, ...level.addable_words]\n      } else if (wordToTeach && wordToTeach.text.length && interval_order > 1){\n          arr = level.addable_words\n      } else{\n        arr = level.teachable_words\n      }\n    return arr\n  }\n\n\n  submitSentenceData(clean_sentences, interval_order, words_left, addSentence){\n    const SentenceElements = this.state.SentenceElements\n    const sentenceWords = SentenceElements.filter( element => element.hasOwnProperty('word_id') )\n    const sentenceWordListSimplified = sentenceWords.map(word => word.text)\n    const cleanSentenceTextSimplified = sentenceWordListSimplified.join('')\n\n    if(clean_sentences.includes(cleanSentenceTextSimplified) && cleanSentenceTextSimplified !== this.state.formerSentenceCleanText){\n      alert(\"Already used this sentence. Please change it.\")\n    }\n    else{\n        addSentence({ variables: this.getSentenceVariables(SentenceElements, sentenceWords,sentenceWordListSimplified,cleanSentenceTextSimplified, interval_order, words_left)})\n    }\n  }\n\n  getSentenceVariables(SentenceElements, sentenceWords, sentenceWordListSimplified,cleanSentenceTextSimplified, interval_order, words_left) {\n    const { wordToTeach, pinyin, english, italics, formerSentenceRawText, replaceMode} = this.state\n\n    const sentenceContainedWordListSimplified = sentenceWordListSimplified.filter(word => word !== wordToTeach.text)\n    const SentenceElementListSimplified = SentenceElements.map(element => element.text)\n    const rawSentenceTextSimplified = SentenceElementListSimplified.join('')\n    const displaySentenceTextSimplified = rawSentenceTextSimplified.replace(new RegExp(wordToTeach.text, 'g'), '#')\n\n    const sentenceWordListTraditional = sentenceWords.map(word => word.alt_text)\n    const cleanSentenceTextTraditional = sentenceWordListTraditional.join('')\n    const SentenceElementListTraditional = SentenceElements.map(element => element.alt_text || element.text)\n    const rawSentenceTextTraditional = SentenceElementListTraditional.join('')\n    const displaySentenceTextTraditional = rawSentenceTextTraditional.replace(new RegExp(wordToTeach.alt_text, 'g'), '#')\n\n    const wordToTeachText = wordToTeach.text\n    const wordToTeachId = wordToTeach.word_id\n    const currentInterval = interval_order\n    const shouldCall =  words_left === 1 && currentInterval < 5\n\n    var resultObj ={rawSentenceTextSimplified,cleanSentenceTextSimplified, displaySentenceTextSimplified,rawSentenceTextTraditional,cleanSentenceTextTraditional, displaySentenceTextTraditional, pinyin, english, italics, wordToTeachText,wordToTeachId,sentenceContainedWordListSimplified,currentInterval}\n\n    if(replaceMode){\n      Object.assign(resultObj,{formerSentenceRawText})\n    } else{\n      Object.assign(resultObj,{shouldCall})\n    }\n\n    return resultObj\n  }\n\n  appendElement(newElement) {\n    if(!newElement.hasOwnProperty('word_id')){\n      this.setState(prevState => \n      ({\n        SentenceElements: [...prevState.SentenceElements, newElement]\n      })) \n    } else {\n      this.setState(prevState => \n        ({\n          points: prevState.points + newElement.level.points, \n          containsWordToTeach: newElement.word_id === this.state.wordToTeach.word_id ? prevState.containsWordToTeach + 1 : prevState.containsWordToTeach,\n          SentenceElements: [...prevState.SentenceElements, newElement]\n        }))\n    }\n  }\n\n  popElement() {\n    if(!this.state.SentenceElements[this.state.SentenceElements.length - 1].hasOwnProperty('word_id')){\n     this.setState(prevState => \n      ({\n        SentenceElements: prevState.SentenceElements.slice(0,-1)\n      }))     \n    } else {\n    this.setState(prevState => \n      ({\n        points: prevState.points - prevState.SentenceElements[prevState.SentenceElements.length - 1].level.points, \n        containsWordToTeach: prevState.SentenceElements[prevState.SentenceElements.length - 1].word_id === this.state.wordToTeach.word_id ? prevState.containsWordToTeach - 1 : prevState.containsWordToTeach,\n        SentenceElements: prevState.SentenceElements.slice(0,-1)\n      }))\n    }\n  }\n\n  getColor(word, minimum_usage){\n    var color = 'white'\n    const max_usage = minimum_usage + 5\n    if(word.hasOwnProperty('times_used')){\n      color = colors.find((colorType) => colorType.times_used + minimum_usage === parseInt(word.times_used) || (colorType.times_used === 5 && parseInt(word.times_used) >= max_usage)).color\n    }\n    return color\n  }\n\n  render() {\n    const { SentenceElements, wordToTeach, points, selectedWordId, containsWordToTeach, punctuationMode,selectedPunctuationId} = this.state\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <Query query={GET_LEVEL_WORDS}>\n          {({ loading, error, data, refetch }) => {\n              if (loading) return <div>Fetching</div>\n              if (error) return <div>Error</div>\n              const interval = this.state.interval || data.Author[0].interval\n              const wordArray = this.get_word_array(data.Author[0].level, interval.interval_order)\n              const minimum_usage = parseInt(data.Author[0].level.minimum_usage)\n               return (\n                <div>\n                <div className=\"Author-dashboard\">\n                  <p>{\"Interval: \" + interval.interval_order}</p>\n                  <p>{\"Minimum points: \" + interval.min_length}</p>\n                  <p>{\"Maximum points:: \" + interval.max_length}</p>\n                  <p>{\"Current Points: \" + points}</p>\n                </div>\n                <p>Word being learned: {wordToTeach.text}</p>\n                <div>\n                <p style={{fontSize: \"30px\"}}>{SentenceElements.length ?  SentenceElements.map(word => word.text).join('') : null}</p>\n               <button\n                onClick={this.popElement.bind(this)}\n                hidden={SentenceElements.length === 0}\n                >\n                Backspace\n                </button>\n                </div>\n                <Switch isOn={punctuationMode} handleToggle={() => \n                  this.setState(prevState => ({punctuationMode: !prevState.punctuationMode}))} />\n                  {punctuationMode ?\n                    (\n                      <div>\n                    <Select\n                    styles={customStyles}\n                    value={{value: selectedPunctuationId, label: selectedPunctuationId && punctuations.find(mark=> mark.id === selectedPunctuationId).text}}\n                    options={punctuations.map(mark =>  { return { label: mark.text, value: mark.id}})}\n                    onChange={option => this.setState({selectedPunctuationId: parseInt(option.value)})}>\n                    </Select>    \n                   <button onClick={() => this.appendElement(punctuations.find(mark=> mark.id === selectedPunctuationId))}>\n                    Add\n                    </button>\n                    </div>\n                  ) : (\n                    <div>\n                  <Select\n                    styles={customStyles}\n                    value={{value: selectedWordId, label: selectedWordId && wordArray.find(word=> word.word_id === selectedWordId).text}}\n                    options={wordArray.map(word =>  { return { label: word.text, value: word.word_id, color: this.getColor(word,minimum_usage)}})}\n                    onChange={option => this.setState({selectedWordId: parseInt(option.value)})}>\n                    </Select>                    \n                     <button\n                      onClick={wordToTeach.text.length ? () => this.appendElement(wordArray.find(word=> word.word_id === selectedWordId)) : \n                        () => {this.setState({wordToTeach: wordArray.find(word=> word.word_id === selectedWordId)})}}\n                      >\n                      {wordToTeach.text.length ? \"Add\" : \"Learn\"}\n                      </button>\n                    </div>\n                    )\n                }\n                  <div>\n                    <input\n                      value={this.state.pinyin}\n                      onChange={e => this.setState({ pinyin: e.target.value })}\n                      type=\"pinyin\"\n                      placeholder=\"Enter sentence's pinyin\"\n                      style={{width: \"250px\"}}\n                    />\n                  </div>\n                  <div>\n                    <input\n                      value={this.state.english}\n                      onChange={e => this.setState({ english: e.target.value })}\n                      type=\"english\"\n                      placeholder=\"Enter sentence's english translation\"\n                      style={{width: \"250px\"}}\n                    />\n                  </div>\n                  <div>\n                    <input\n                      value={this.state.italics}\n                      onChange={e => this.setState({ italics: e.target.value })}\n                      type=\"italics\"\n                      placeholder=\"Enter sentence's extra notes\"\n                      style={{width: \"250px\"}}\n                    />\n                  </div>\n                   <Mutation mutation={this.state.replaceMode ? REPLACE_SENTENCE : ADD_SENTENCE}\n                      update={(store) => {\n                        this.setState(this.baseState)\n                        refetch()                      \n                        }\n                      }\n                   >\n                        {addSentence => (\n                          <button\n                            onClick={() => \n                              {\n                                this.submitSentenceData(interval.sentences.map((sentence) => sentence.clean_text), interval.interval_order,data.Author[0].level.teachable_words.length, addSentence)\n                              }\n                          }\n                            disabled={!containsWordToTeach/* || points <  interval.min_length || points >  interval.max_length*/}\n                          >\n                          Submit\n                          </button>\n                        )}\n                    </Mutation>\n                    <div>\n                    <button onClick={() => this.setState(this.baseState) }>\n                    Clear Sentence\n                    </button>\n                    </div>\n                  </div>\n                  )\n                }}\n            </Query>\n        </header>\n        \n      </div>\n    \n    );\n  }\n}\n\nexport default Author;\n","import React, { Component } from 'react'\nimport {Query} from 'react-apollo';\nimport gql from 'graphql-tag';\n\nconst GET_DROPDOWNS = gql`\n  query getDropdowns($userName: String!) {\n\tgetIntervalsAndLevels(userName: $userName) {\n\t\tlevels\n\t\tintervals\n\t}\n  }\n`\n\nconst GET_SENTENCE_LIST = gql`\n  query getSentences($levelNumber: Int! $intervalOrder: Int!) {\n\tgetSentenceList(levelNumber: $levelNumber intervalOrder: $intervalOrder) {\n\t\traw_text\n\t\tclean_text\n\t\twords_contained{\n\t\t\tcontains_order\n\t\t\tWord{\n\t\t\t\tword_id\n\t\t\t\ttext\n\t\t\t\talt_text\n\t\t\t\tlevel{\n\t\t\t\t\tpoints\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdisplay_text\n\t\tword_taught{\n\t\t\tword_id\n\t\t\ttext\n\t\t\talt_text\n\t\t\tlevel{\n\t\t\t\tpoints\n\t\t\t}\n\t\t}\n\t\tpinyin\n\t\tenglish\n\t\titalics\n\t\tinterval{\n\t        sentences{\n\t          clean_text\n\t        }\n\t\t\tinterval_order\n      \t\tseconds\n      \t\tmin_length\n      \t\tmax_length\n\t\t}\n\t}\n  }\n`\n\n\nclass Editor extends Component {\n\tstate = {\n      selectedLevel: 1,\n      selectedInterval: 1\n    }\n\n\n  getDropdowns(refetch){\n  \treturn (\n\t\t<Query query={GET_DROPDOWNS} variables={{userName: \"test\"}}>\n      \t{({ loading, error, data, refetch }) => {\n      \t  if (loading) return <div>Fetching</div>\n          if (error) return <div>Error</div>\n          return(\n          \t<div>\n          \tLevel: <select onChange={(e) => this.setState({selectedLevel: parseInt(e.target.value)})}>{data.getIntervalsAndLevels.levels.map((level) => <option value={level} selected={level === this.state.selectedLevel}>{level}</option>)}</select>\n          \tInterval: <select onChange={(e) => this.setState({selectedInterval: parseInt(e.target.value)})}>{data.getIntervalsAndLevels.intervals.map((interval) => <option value={interval} selected={interval === this.state.selectedInterval}>{interval}</option>)}</select>\n          \t</div>\n          )\n      \t}\n      }\n\t\t</Query>\n  \t)\n\n  }\n\n  parseSentence(sentence){\n  \tlet current_index = 0\n  \tlet sentenceElements = []\n  \tlet wordToTeach = null\n  \tlet containsWordToTeach = 0\n  \tlet points = 0\n  \tlet display_text_copy = sentence.display_text\n  \tconsole.log(sentence)\n  \tsentence.words_contained.sort((previous, next)=> {return previous.contains_order - next.contains_order})\n  \twhile(display_text_copy.length){\n  \t\tif(display_text_copy[0] === '#'){\n  \t\t\tsentenceElements.push({text: sentence.word_taught.text, alt_text: sentence.word_taught.alt_text, word_id: sentence.word_taught.word_id, level: {points: sentence.word_taught.level.points}})\n  \t\t\tif(wordToTeach === null){\n  \t\t\t\twordToTeach = {text: sentence.word_taught.text, alt_text: sentence.word_taught.alt_text, word_id: sentence.word_taught.word_id, level: {points: sentence.word_taught.level.points}}\n  \t\t\t}\n  \t\t\tdisplay_text_copy = display_text_copy.substring(1)\n  \t\t\tcontainsWordToTeach++\n  \t\t\tpoints += sentence.word_taught.level.points\n  \t\t} else if(sentence.words_contained[current_index] && sentence.words_contained[current_index].Word.text[0] === display_text_copy[0]){\n  \t\t\tconsole.log(sentence)\n  \t\t\tsentenceElements.push({ text: sentence.words_contained[current_index].Word.text, alt_text: sentence.words_contained[current_index].Word.alt_text, word_id: sentence.words_contained[current_index].Word.word_id, level: {points: sentence.words_contained[current_index].Word.level.points}})\n  \t\t\tdisplay_text_copy = display_text_copy.substring(sentence.words_contained[current_index].Word.text.length)\n  \t\t\tpoints += sentence.words_contained[current_index].Word.level.points\n  \t\t\tcurrent_index++\n  \t\t} else {\n  \t\t\t sentenceElements.push({text: display_text_copy[0]})\n  \t\t\t display_text_copy = display_text_copy.substring(1)\n  \t\t}\n  \t}\n\n\tthis.props.history.push({\n\t\tpathname: '/author',\n\t\tstate: {\n\t\t\tsentenceElements: sentenceElements, \n\t\t\tformerSentenceRawText: sentence.raw_text,\n\t\t\tformerSentenceCleanText: sentence.clean_text,\n\t\t\twordToTeach: wordToTeach,\n\t\t\tcontainsWordToTeach: containsWordToTeach,\n\t\t\tpinyin: sentence.pinyin,\n\t\t\tenglish: sentence.english,\n\t\t\titalics: sentence.italics,\n\t\t\tpoints: points,\n\t\t\tinterval: sentence.interval\n\t\t}  \n\t})\t\t\t\t\t\t\n  }\n\n\trender(){\n\t\treturn(\n\t    <div className=\"App\">\n\t      <header className=\"App-header\">\n\t\t      <Query query={GET_SENTENCE_LIST} variables={{levelNumber: this.state.selectedLevel, intervalOrder: this.state.selectedInterval}}>\n\t\t      \t{({ loading, error, data, refetch }) => {\n\t\t      \t  if (loading) return <div>Fetching</div>\n\t              if (error) return <div>Error</div>\n\t              return(\n\t              \t<div>\n\t              \t\t{this.getDropdowns()}\n\t              \t\t<table>\n\t              \t\t  <thead>\n\t\t\t\t\t\t    <tr>\n\t\t\t\t\t\t      <th>Sentence</th>\n\t\t\t\t\t\t      <th>Word Taught</th>\n\t\t\t\t\t\t      <th>Pinyin</th>\n\t\t\t\t\t\t      <th>Translation</th>\n\t\t\t\t\t\t      <th>Notes</th>\n\t\t\t\t\t\t    </tr>\n\t\t\t\t\t\t  </thead>\n\t              \t\t<tbody>\n\t              \t\t{data.getSentenceList.map(sentence => {\n\t              \t\t\treturn(\n\t\t              \t\t\t<tr>\n\t\t              \t\t\t <td>{sentence.raw_text}</td>\n\t\t              \t\t\t <td>{sentence.word_taught.text}</td>\n\t\t              \t\t\t <td>{sentence.pinyin}</td>\n\t\t              \t\t\t <td>{sentence.english}</td>\n\t\t              \t\t\t <td>{sentence.italics}</td>\n\t\t              \t\t\t <td><button onClick={() => this.parseSentence(sentence)}>Edit</button></td>\n\t\t              \t\t\t</tr>\n\t\t              \t\t)\n\t              \t\t})}\n\t              \t\t</tbody>\n\t              \t\t</table>\n\t              \t</div>\n\t              )\n\t          \t}\n\t          }\n\t\t\t\t</Query>\n\t\t\t</header>\n\t\t</div>\n\t\t)\n\t}\n\n\n\n}\n\nexport default Editor;","import React, { Component } from 'react'\nimport {Query} from 'react-apollo';\nimport gql from 'graphql-tag';\n\nconst GET_WORDS = gql`\n  query getWords {\n\tLevel {\n\t\tall_words{\n\t\t\tword_id\n\t\t\ttext\n\t\t\tpinyin\n\t\t\tenglish\n\t\t\titalics\n\t\t\ttimes_used\n\t\t\tlevel{\n\t\t\t\tlevel_number\n\t\t\t}\n\t\t}\n\t}\n  }\n`\n\n\nclass Words extends Component {\n\n\teditWord(word){\n\t\tthis.props.history.push({\n\t\t\tpathname: '/wordedit',\n\t\t\tstate: {\n\t\t\t\tword_id: word.word_id,\n\t\t\t\ttext: word.text,\n\t\t\t\tpinyin: word.pinyin,\n\t\t\t\tenglish: word.english,\n\t\t\t\titalics: word.italics\n\t\t\t}  \n\t\t})\n\t}\n\trender(){\n\t  return (\n\t    <div className=\"App\">\n\t      <header className=\"App-header\">\n\t\t      <Query query={GET_WORDS}>\n\t\t      \t{({ loading, error, data, refetch }) => {\n\t\t      \t  if (loading) return <div>Fetching</div>\n\t              if (error) return <div>error</div>\n\t              const word_list = data.Level[0].all_words\n\t              return(\n\t              \t\t <table>\n\t              \t\t  <thead>\n\t\t\t\t\t\t    <tr>\n\t\t\t\t\t\t      <th>Word</th>\n\t\t\t\t\t\t      <th>Pinyin</th>\n\t\t\t\t\t\t      <th>Translation</th>\n\t\t\t\t\t\t      <th>Notes</th>\n\t\t\t\t\t\t      <th>Times Used</th>\n\t\t\t\t\t\t      <th>Level</th>\n\t\t\t\t\t\t    </tr>\n\t\t\t\t\t\t  </thead>\n\t              \t\t<tbody>\n\t              \t\t{word_list.map(word => {\n\t              \t\t\treturn(\n\t\t              \t\t\t<tr>\n\t\t              \t\t\t <td>{word.text}</td>\n\t\t              \t\t\t <td>{word.pinyin}</td>\n\t\t              \t\t\t <td>{word.english}</td>\n\t\t              \t\t\t <td>{word.italics}</td>\n\t\t              \t\t\t <td>{word.times_used}</td>\n\t\t              \t\t\t <td>{word.level ? word.level.level_number : 0}</td>\n\t\t              \t\t\t <td><button onClick={() => this.editWord(word)}>Edit</button></td>\n\t\t              \t\t\t</tr>\n\t\t              \t\t)\n\t              \t\t})}\n\t              \t\t</tbody>\n\t              \t\t</table>\n\t              )\n\t          \t}\n\t      \t\t}\n\t          </Query>\n\t      </header>\n\t    </div>\n\t  );\n  \t}\n}\n\nexport default Words","import React, { Component } from 'react'\nimport { Mutation} from 'react-apollo';\nimport gql from 'graphql-tag';\nimport '../styles/App.css';\n\nconst EDIT_WORD = gql`\n  mutation editWord($word_id: Int!, $english: String, $italics: String) {\n  \tUpdateWord(word_id: $word_id, english: $english, italics: $italics){\n  \t\tword_id\n  \t\ttext\n  \t}\n  }\n`\n\nclass WordEdit extends Component {\n\tconstructor(props){\n    super(props)\n    this.state = {\n      word_id: props.location.state.word_id,\n      text: props.location.state.text,\n      pinyin: props.location.state.pinyin,\n      english: props.location.state.english,\n      italics: props.location.state.italics\n    }\n  }\n\trender(){\n\t  return (\n\t    <div className=\"App\">\n\t      <header className=\"App-header\">\n\t        <p>{this.state.text}</p>\n\t        <p>{this.state.pinyin}</p>\n\t        <p>Translation</p>\n            <input\n              value={this.state.english}\n              onChange={e => this.setState({ english: e.target.value })}\n              type=\"english\"\n              placeholder=\"Enter word's english translation\"\n              style={{width: \"250px\"}}\n            />\n            <p>Notes</p>\n\t        <input\n              value={this.state.italics}\n              onChange={e => this.setState({ italics: e.target.value })}\n              type=\"italics\"\n              placeholder=\"Enter word's extra notes\"\n              style={{width: \"250px\"}}\n            />\n            <Mutation mutation={EDIT_WORD}\n               update={(store) => {\n                   this.props.history.push({pathname: '/words' })                   \n                }}\n             >\n\t            {editWord => (\n\t              <button onClick={() => editWord({variables: {word_id: parseInt(this.state.word_id), english: this.state.english, italics: this.state.italics}})} disabled={this.state.english.length === 0}>\n\t              Submit\n\t              </button>\n\t            )}\n             </Mutation>\n\t      </header>\n\t    </div>\n\t  );\n  \t}\n}\n\nexport default WordEdit;","import React from \"react\";\n\nconst ProgressBar = (props) => {\n  const { bgcolor, completed } = props;\n\n  const containerStyles = {\n    height: 20,\n    width: '100%',\n    backgroundColor: \"#e0e0de\",\n  }\n\n  const fillerStyles = {\n    height: '100%',\n    width: `${completed}%`,\n    backgroundColor: bgcolor,\n    borderRadius: 'inherit',\n    textAlign: 'right'\n  }\n\n  return (\n    <div style={containerStyles}>\n      <div style={fillerStyles}>\n      </div>\n    </div>\n  );\n};\n\nexport default ProgressBar;","import React from 'react';\nimport '../styles/Modal.css';\n\nconst Modal = ({ handleClose, show, characters }) => {\n  const showHideClassName = show ? \"modal display-block\" : \"modal display-none\";\n\n  return (\n    <div className={showHideClassName}>\n      <section className=\"modal-main\">\n\t\t{\n\t\t\tcharacters.map(char => \n\t            <div>\n\t\t            <p>{char.text}</p>\n\t\t            <p>{char.english}</p>\n            \t</div>\n          )}\n        <button onClick={handleClose}>close</button>\n      </section>\n    </div>\n  );\n};\n\nexport default Modal;","import React, { Component } from 'react'\nimport {Query, Mutation} from 'react-apollo';\nimport gql from 'graphql-tag';\nimport { Howl } from 'howler';\nimport ProgressBar from './ProgressBar'\nimport Modal from './Modal'\nimport { getCookie} from '../utils'\n\n\n\nconst MAKE_ATTEMPT = gql`\n  mutation makeAttempt($userId: Int!, $sentenceId: Int!, $isCorrect: Boolean!, $nextIntervalSentenceId: Int) {\n\tmakeClozeAttempt(userId: $userId, sentenceId: $sentenceId, isCorrect: $isCorrect, nextIntervalSentenceId: $nextIntervalSentenceId)\n  }\n\n`\n\nconst CREATE_USER = gql`\nmutation addTemporaryUser($user_name: String!, $email: String!, $password: String!, $role: String!) {\n  CreateUser(user_name: $user_name, email: $email, password: $password, role: $role) {\n    _id\n    user_name\n    role\n    token\n  }\n}\n\n`\n\nconst GET_SENTENCE = gql`\n  query getSentence($userId: Int!) {\n\tgetNextSentence(userId: $userId) {\n\t\t_id\n    time_fetched\n\t\tnext_interval_sentence_id\n\t\traw_text\n\t\tdisplay_text\n    clean_text\n\t\tpinyin\n\t\tenglish\n    italics\n    interval{\n      interval_order\n    }\n\t\tword_taught{\n      word_id\n\t\t\ttext\n\t\t\tenglish\n      pinyin\n\t\t\tcharacters{\n\t\t\t\ttext\n\t\t\t\tenglish\n\t\t\t}\n\t\t}\n\n\t}\n  getCurrentProgress(userId: $userId){\n    words_learned\n    intervals_completed\n    total_word_count\n  }\n\n  }\n\n`\n\nclass Play extends Component {\n\tconstructor(){\n    super()\n    this.state = {\n    \tshowAnswer: false,\n      isSubmitted: false,\n      showCharacterDefinitions: false,\n    \tuserResponse: '',\n      isCorrect: true,\n      lastSentenceId: null,\n      audio: null,\n      timeFetched: null,\n      user:{\n        user_name: null,\n        userId: null,\n        role: null\n      }\n    }\n  }\n\n  componentDidMount(){\n    if(this.props.user){\n      const {user_name, _id ,role} = this.props.user\n      this.setUserInfo(user_name, parseInt(_id), role)\n    }\n  }\n\n  setUserInfo(user_name, userId, role){\n    this.setState({user:{user_name, userId, role}})\n  }\n\n  componentDidUpdate(prevProps){\n    if(prevProps.user && this.props.user && this.props.user._id === prevProps.user._id && this.props.user.role === prevProps.user.role){\n      //do nothing\n    }else{\n      if(this.props.user){\n        const {user_name, _id ,role} = this.props.user\n        this.setUserInfo(user_name, parseInt(_id), role)\n      }else if(prevProps.user && !this.props.user){\n        this.setUserInfo(null,null,null)\n      }\n    }\n  }\n\n  showModal = () => {\n    this.setState({ showCharacterDefinitions: true });\n  };\n\n  hideModal = () => {\n    this.setState({ showCharacterDefinitions: false });\n  };\n\n\tcheckAnswer(correct_response) {\n\t\treturn correct_response === this.state.userResponse\n\t}\n\n  setAudio(sentenceId) {\n    var Sounds\n     Sounds = new Howl({\n         src: [\"/audio/sentences/\" + sentenceId + \".m4a\"]\n      })\n  \n    return Sounds\n  }\n\n  playSound(){\n    if(this.state.audio){\n        this.state.audio.play()\n    }\n  }\n\n  getFontColor(){\n    var color = 'black'\n    if(this.state.isSubmitted){\n      color = this.state.isCorrect ? 'green' : 'red'\n    }\n    return color\n  }\n\n  submitAnswer(makeAttempt, refetch, userId, sentenceId, correctResponse, time_fetched, isCorrect, nextIntervalSentenceId){\n    if(!this.state.isSubmitted){\n      makeAttempt({variables:{\n        userId: userId,\n        sentenceId: sentenceId,\n        isCorrect: isCorrect,\n        nextIntervalSentenceId: nextIntervalSentenceId\n      }})\n    }\n     else if(this.state.isSubmitted && this.state.showAnswer){\n      this.setState({\n          showAnswer: false,\n          isSubmitted: false,\n          userResponse: '',\n          timeFetched: time_fetched,\n          showCharacterDefinitions: false,\n          audio: null\n      }, () => {\n        refetch()\n      })\n    } else{\n        this.setState({\n        showAnswer: true,\n        userResponse: correctResponse,\n        isCorrect: true,\n        }, () => {this.playSound()})\n    }\n  }\n\n  getText(text){\n    return(\n      <div style={{display: \"flex\", flexDirectioion: \"row\", justifyContent: \"center\"}}>\n      <p style={{fontSize: \"16px\"}}>{text.english}</p> <i style={{\"marginBlockStart\": \"1em\"}}>{text.italics}</i>\n      </div>\n      )\n  }\n\n\n  playDashboard(userId,role){\n    return(\n      <Query query={GET_SENTENCE} variables={{userId: userId}}>\n          {({ loading, error, data, refetch }) => {\n            if (loading) return <div>Fetching</div>\n            if (error) return <div>error</div>\n            //Don't rerender when waiting for refetch or when there is no result\n            if (data.getNextSentence && this.state.timeFetched === data.getNextSentence.time_fetched)  return <div/>\n            if(data.getNextSentence){\n              const sentenceId = parseInt(data.getNextSentence._id)\n              var nextIntervalSentenceId = null\n              if(userId && data.getNextSentence.next_interval_sentence_id){\n                nextIntervalSentenceId = data.getNextSentence.next_interval_sentence_id\n              } \n                return(\n                  <div style={{width: \"50%\"}}>\n                    {role === \"TESTER\" && (<p style={{fontSize: \"16px\"}}>You are currently not logged in. Log in to save your progress.</p>)}\n                    <p>{\"Words Learned: \" + data.getCurrentProgress.words_learned + \"/\" + data.getCurrentProgress.total_word_count}</p>\n                    <p>{\"Cards Completed: \" + data.getCurrentProgress.intervals_completed}</p>\n                   <ProgressBar bgcolor={\"rgb(245 109 109)\"} completed={(data.getCurrentProgress.intervals_completed / (data.getCurrentProgress.total_word_count * 7)) * 100}  />\n                  <div>\n                    {this.state.showAnswer && <button onClick={() => this.playSound(data.getNextSentence._id, data.getNextSentence.word_taught.word_id)}>replay audio</button>}\n                    <Modal characters={data.getNextSentence.word_taught.characters} show={this.state.showCharacterDefinitions} handleClose={this.hideModal}/>\n                     <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n                     {this.state.showAnswer && <p style={{fontSize: \"16px\"}}>{data.getNextSentence.pinyin}</p>}\n                     {this.getText(data.getNextSentence)}\n                      </div>\n                     <Mutation mutation={MAKE_ATTEMPT}\n                          update={(store) => {\n                            if(!this.state.isSubmitted){\n                              this.setState({\n                              isSubmitted: true,\n                              showAnswer: this.checkAnswer(data.getNextSentence.word_taught.text),\n                              isCorrect: this.checkAnswer(data.getNextSentence.word_taught.text),\n                              audio: this.setAudio(data.getNextSentence._id)\n                              }, () => {this.checkAnswer(data.getNextSentence.word_taught.text) && this.playSound()})\n                            }\n\n                            }\n                          }\n                         >\n                          {makeAttempt => (\n                            <div style={{display: \"flex\", flexDirectioion: \"row\", justifyContent: \"center\"}}>\n                             <p>{data.getNextSentence.display_text.substr(0,data.getNextSentence.display_text.indexOf('#'))}</p>\n                            <input style={{width: `${data.getNextSentence.word_taught.text.length * 25}px`,fontSize: \"calc(10px + 2vmin)\", margin: \"15px 5px 15px 5px\", color: this.getFontColor()}} value={this.state.userResponse} onChange={e => this.setState({ userResponse: e.target.value })}\n                            onKeyDown={(e) => {\n                              if (e.key === 'Enter') {\n                                this.submitAnswer(makeAttempt, refetch, userId, sentenceId, data.getNextSentence.word_taught.text, data.getNextSentence.time_fetched, this.checkAnswer(data.getNextSentence.word_taught.text), nextIntervalSentenceId)\n                              }\n                            }}\n                            />\n                             <p>{data.getNextSentence.display_text.substr(data.getNextSentence.display_text.indexOf('#') + 1,data.getNextSentence.display_text.length)}</p>\n                            <button\n                              style={{margin: \"15px 5px 15px 5px\"}}\n                              onClick={() => \n                                {\n                                  this.submitAnswer(makeAttempt, refetch, userId, sentenceId, data.getNextSentence.word_taught.text, data.getNextSentence.time_fetched, this.checkAnswer(data.getNextSentence.word_taught.text), nextIntervalSentenceId)\n                                }\n                              }\n                            >\n                            {this.state.showAnswer ? \">\" : \">\"}\n                            </button>\n                            </div>\n                          )}\n                    </Mutation>\n                  </div>\n                  <div>\n                    <p style={{fontSize: \"24px\"}}>{(data.getNextSentence.clean_text !== data.getNextSentence.word_taught.text) && data.getNextSentence.word_taught.english}</p>\n                  </div>\n                  {this.state.showAnswer && data.getNextSentence.word_taught.characters.length > 0 && <button onClick={() => this.setState(prevState => ({showCharacterDefinitions: !prevState.showCharacterDefinitions}))}>Character Definitions</button>}\n                  {this.state.showAnswer && (\n                      <div>\n                        <div style={{display: \"flex\", flexDirectioion: \"row\", justifyContent: \"center\"}}>\n                        <p>{data.getNextSentence.word_taught.text}</p>\n                        <p style={{marginLeft: \"5px\"}}>{data.getNextSentence.word_taught.pinyin}</p>\n                        </div>\n                      </div>\n                  )} \n              </div>\n            ) \n         }\n          else return <div>{!!getCookie('access-token') && (data && data.getCurrentProgress && data.getCurrentProgress.words_learned === 150)  ? \"Demo Complete\" : !getCookie('access-token') && \"Please login to continue\"}</div>\n         }}\n        </Query>\n    )\n\n  }\n\n   _confirm = async data => {\n    this.props.refetchUser()\n  }\n\n\trender() {\n\t  const {userId, role} = this.state.user\n\t  return (\n\t    <div className=\"App\">\n\t      <header className=\"App-header\">\n          {userId ? this.playDashboard(userId, role): \n              <Mutation mutation={CREATE_USER}\n                onCompleted={data => this._confirm(data)}\n                >\n              {createUser => (\n              <button onClick={()=> createUser({variables:{user_name: \"\", email: \"\", password: \"\", role: \"TESTER\"}})}>BEGIN</button>\n              )}\n            </Mutation>}\n\t      </header>\n\t    </div>\n\t  );\t\t\n\t}\n}\n\n\n\n\n\nexport default Play;","import React, { Component } from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport Login from './Login'\nimport Header from './Header'\nimport Author from './Author'\nimport Editor from './Editor'\nimport Words from './Words'\nimport WordEdit from './WordEdit'\nimport Play from './Play'\nimport {Query} from 'react-apollo';\nimport gql from 'graphql-tag';\n\n\nconst GET_USER = gql`\nquery getUser {\n  me {\n    _id\n    user_name\n    role\n    password\n    token\n  }\n}\n`\n\n\n\nclass App extends Component {\n  render() {\n    return(\n      <div>\n      <Query query={GET_USER}>\n      {({ loading, error, data, refetch }) => {\n        if (loading) return <div>Fetching</div>\n        if (error) return <div>error</div>\n        const user = data.me\n        return(\n        <div>\n          <Header user={user} refetchUser={refetch}/>\n          <Switch>\n            <Route exact path=\"/\" render={() => (<Play  user={user} refetchUser={refetch}/> )} />\n            {user && user.role === 'ADMIN' && (<Route exact path=\"/author\" component={Author} />)}\n            {user && user.role === 'ADMIN' && (<Route exact path=\"/editor\" component={Editor} />)}\n            {user && user.role === 'ADMIN' && (<Route exact path=\"/words\" component={Words} />)}\n            {user && user.role === 'ADMIN' && (<Route exact path=\"/wordedit\" component={WordEdit} />)}\n            <Route exact path=\"/login\" render={() => (<Login user={user} refetchUser={refetch}/>)} />\n          </Switch>\n        </div>\n        )\n      }}\n      </Query>\n      </div>\n    )\n  }\n\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.css'\nimport App from './components/App'\nimport * as serviceWorker from './serviceWorker';\nimport { ApolloProvider } from 'react-apollo'\nimport { ApolloClient } from 'apollo-client'\nimport { createHttpLink } from 'apollo-link-http'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { BrowserRouter } from 'react-router-dom'\n//import { setContext } from 'apollo-link-context'\n//import { getToken } from './constants'\n\n\nconst httpLink = createHttpLink({\n  uri: '/graphql',\n  credentials: 'include'\n\n})\n\n\n/*const authLink = setContext((_, { headers }) => {\n  const token = getToken()\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : ''\n    }\n  }\n})*/\n\nconst client = new ApolloClient({\n  //link: authLink.concat(httpLink),\n  link: httpLink,\n  cache: new InMemoryCache()\n})\n\nReactDOM.render(\n  <BrowserRouter>\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>\n  </BrowserRouter>,\n  document.getElementById('root')\n)\nserviceWorker.unregister();\n\n"],"sourceRoot":""}